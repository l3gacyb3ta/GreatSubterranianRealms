[gd_scene load_steps=27 format=3 uid="uid://c1etewb0ct0y6"]

[ext_resource type="Script" path="res://zork_scenes/scripts/porch_light.gd" id="1_a1cat"]
[ext_resource type="Material" uid="uid://qxx7liicgbk0" path="res://assets/materials/grass.tres" id="2_e20xh"]
[ext_resource type="PackedScene" uid="uid://dt4s4wgtnlhbg" path="res://assets/models/board.tscn" id="2_r0bn5"]
[ext_resource type="Script" path="res://addons/story_colliders/storyCollider.gd" id="4_n6anw"]
[ext_resource type="Script" path="res://zork_scenes/scripts/switch_lever.gd" id="5_2lskt"]
[ext_resource type="Material" uid="uid://b8vap32sehuft" path="res://assets/materials/glow.tres" id="5_ho3tv"]
[ext_resource type="Script" path="res://zork_scenes/scripts/marker.gd" id="6_0ynxs"]
[ext_resource type="Texture2D" uid="uid://csgpyn47xyty8" path="res://assets/icons/down_arrow.svg" id="6_uoo2s"]
[ext_resource type="PackedScene" uid="uid://dkvgqmvxq77ew" path="res://assets/models/house/house.glb" id="9_26att"]
[ext_resource type="PackedScene" uid="uid://dpnmnhpx21ba" path="res://assets/models/mailbox/mailbox.glb" id="9_bbtn0"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_uys42"]
points = PackedVector3Array(0, 0, 0, 0, 1, 0, 2.1, 0, 0, 0, 1, 3.5, 0, 0, 3.5, 2.1, 0, 3.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_r34ol"]
size = Vector3(8.9765, 0.469482, 2.18042)

[sub_resource type="BoxShape3D" id="BoxShape3D_nlhnu"]
size = Vector3(0.190234, 3.32289, 0.251758)

[sub_resource type="BoxShape3D" id="BoxShape3D_sl7l7"]
size = Vector3(1.78308, 2.24011, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_i113y"]
size = Vector3(0.5, 0.5, 0.5)

[sub_resource type="BoxMesh" id="BoxMesh_aehgj"]
size = Vector3(0.2, 0.3, 0.2)

[sub_resource type="BoxMesh" id="BoxMesh_ixtmd"]
size = Vector3(0.05, 0.2, 0.05)

[sub_resource type="Animation" id="Animation_vc2xi"]
length = 0.001
tracks/0/type = "rotation_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SwitchLever")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0, 0.939693, -0.34202)

[sub_resource type="Animation" id="Animation_6hb4n"]
resource_name = "off_to_on"
length = 0.1
tracks/0/type = "rotation_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SwitchLever")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0, 0.939693, -0.34202, 0.1, 1, 0, 0, -0.34202, 0.939693)

[sub_resource type="Animation" id="Animation_q2ydy"]
resource_name = "on_to_off"
length = 0.1
tracks/0/type = "rotation_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SwitchLever")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0, -0.34202, 0.939693, 0.1, 1, 0, 0, 0.939693, -0.34202)

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ww8cj"]
_data = {
"RESET": SubResource("Animation_vc2xi"),
"off_to_on": SubResource("Animation_6hb4n"),
"on_to_off": SubResource("Animation_q2ydy")
}

[sub_resource type="BoxMesh" id="BoxMesh_43kqw"]
material = ExtResource("2_e20xh")
size = Vector3(30, 1, 30)

[sub_resource type="BoxShape3D" id="BoxShape3D_u2pcf"]
size = Vector3(30, 1, 30)

[sub_resource type="BoxShape3D" id="BoxShape3D_t1jw3"]
size = Vector3(0.324341, 0.642578, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_qlf3f"]
size = Vector3(0.33197, 1.67969, 0.630875)

[sub_resource type="TorusMesh" id="TorusMesh_urnji"]
material = ExtResource("5_ho3tv")
inner_radius = 0.3
outer_radius = 0.5

[node name="House" type="Node3D"]

[node name="PorchLight" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.905397, 5.79302, -10.6195)
visible = false
light_energy = 2.0
light_bake_mode = 1
omni_range = 7.61736
script = ExtResource("1_a1cat")

[node name="house" parent="." instance=ExtResource("9_26att")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -5.889)

[node name="Porch Collider" type="StaticBody3D" parent="house"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0269508, 1.19209e-07, -0.0375876)

[node name="ramp" type="CollisionShape3D" parent="house/Porch Collider"]
transform = Transform3D(-2.18557e-08, 0, -0.5, 0, 0.5, 0, 0.5, 0, -2.18557e-08, 4.19376, -0.0579913, 6.01332)
shape = SubResource("ConvexPolygonShape3D_uys42")

[node name="deck" type="CollisionShape3D" parent="house/Porch Collider"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.861237, 0.187622, 4.90904)
shape = SubResource("BoxShape3D_r34ol")

[node name="Pillar" type="CollisionShape3D" parent="house/Porch Collider"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.858081, 2.11249, 5.86581)
shape = SubResource("BoxShape3D_nlhnu")

[node name="Pillar2" type="CollisionShape3D" parent="house/Porch Collider"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.16073, 2.11249, 5.86581)
shape = SubResource("BoxShape3D_nlhnu")

[node name="Pillar3" type="CollisionShape3D" parent="house/Porch Collider"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.97664, 2.11249, 5.86581)
shape = SubResource("BoxShape3D_nlhnu")

[node name="OmniLight3D" type="OmniLight3D" parent="house"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.980966, 3.92065, 5.76712)
light_color = Color(0.65706, 0.629647, 0.346892, 1)
light_bake_mode = 1
omni_range = 7.61736

[node name="Window Boards" type="Node3D" parent="house"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.01894, 0.563569, 3.94758)

[node name="Board2" parent="house/Window Boards" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.99226, 5.42777e-09, -0.0794707, 0.124173, -4.33731e-08, 0.635047, -1.3144e-15, -1, -2.79753e-08, -0.269257, 1.96619, 0.0259426)

[node name="Board" parent="house/Window Boards" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.99985, -7.57529e-10, 0.0138642, -0.0173303, -4.37048e-08, 0.79988, 5.79516e-16, -1, -3.49691e-08, -0.269257, 1.44922, 0.0259426)

[node name="Board3" parent="house/Window Boards" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.988391, -6.64123e-09, 0.121547, -0.151661, 0.0598987, 0.789293, -0.00910063, -0.998204, 0.0473627, -0.269257, 0.830669, 0.0259426)

[node name="Board4" parent="house/Window Boards" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.999999, 3.96683e-11, -0.000580847, 0.000907585, -4.37114e-08, 0.64, -1.3144e-15, -1, -2.79753e-08, -0.269257, 2.37519, 0.0259426)

[node name="Board5" parent="house/Window Boards" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.63558, -3.37467e-08, 0.494103, -0.772035, -2.77821e-08, 0.406771, -1.28342e-15, -1, -2.79753e-08, -0.368805, 1.5098, 0.133785)

[node name="Window Boards2" type="Node3D" parent="house"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -5.11457, 0.474396, -0.0745111)

[node name="Board2" parent="house/Window Boards2" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.99226, 5.42777e-09, -0.0794707, 0.124173, -4.33731e-08, 0.635047, -1.3144e-15, -1, -2.79753e-08, -0.269257, 1.96619, 0.0259426)

[node name="Board" parent="house/Window Boards2" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.99985, -7.57529e-10, 0.0138642, -0.0173303, -4.37048e-08, 0.79988, 5.79516e-16, -1, -3.49691e-08, -0.269257, 1.44922, 0.0259426)

[node name="Board3" parent="house/Window Boards2" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.988391, -6.64123e-09, 0.121547, -0.151661, 0.0598987, 0.789293, -0.00910063, -0.998204, 0.0473627, -0.269257, 0.830669, 0.0259426)

[node name="Board4" parent="house/Window Boards2" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.999999, 3.96683e-11, -0.000580847, 0.000907585, -4.37114e-08, 0.64, -1.3144e-15, -1, -2.79753e-08, -0.269257, 2.37519, 0.0259426)

[node name="Board5" parent="house/Window Boards2" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.634496, -0.0583656, 0.49326, -0.772035, -2.77821e-08, 0.406771, -0.0370959, -0.998295, -0.0288386, -0.368805, 1.5098, -0.0721991)

[node name="Window Boards3" type="Node3D" parent="house"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 5.63641, 0.474396, -0.0745111)

[node name="Board2" parent="house/Window Boards3" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.99226, 5.42777e-09, -0.0794707, 0.124173, -4.33731e-08, 0.635047, -1.3144e-15, -1, -2.79753e-08, -0.269257, 1.96619, 0.0259426)

[node name="Board" parent="house/Window Boards3" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.99985, -7.57529e-10, 0.0138642, -0.0173303, -4.37048e-08, 0.79988, 5.79516e-16, -1, -3.49691e-08, -0.269257, 1.44922, 0.0259426)

[node name="Board3" parent="house/Window Boards3" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.988391, -6.64123e-09, 0.121547, -0.151661, 0.0598987, 0.789293, -0.00910063, -0.998204, 0.0473627, -0.269257, 0.830669, 0.0259426)

[node name="Board4" parent="house/Window Boards3" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.999999, 3.96683e-11, -0.000580847, 0.000907585, -4.37114e-08, 0.64, -1.3144e-15, -1, -2.79753e-08, -0.269257, 2.37519, 0.0259426)

[node name="Board5" parent="house/Window Boards3" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.634496, -0.0583656, 0.49326, -0.772035, -2.77821e-08, 0.406771, -0.0370959, -0.998295, -0.0288386, -0.368805, 1.5098, -0.0721991)

[node name="Window Boards4" type="Node3D" parent="house"]
transform = Transform3D(0.997255, 0, -0.0740389, 0, 1, 0, 0.0740389, 0, 0.997255, -1.96457, 0.474396, -3.4704)

[node name="Board2" parent="house/Window Boards4" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.99226, 5.42777e-09, -0.0794707, 0.124173, -4.33731e-08, 0.635047, -1.3144e-15, -1, -2.79753e-08, -0.269257, 1.96619, 0.0259426)

[node name="Board" parent="house/Window Boards4" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.99985, -7.57529e-10, 0.0138642, -0.0173303, -4.37048e-08, 0.79988, 5.79516e-16, -1, -3.49691e-08, -0.269257, 1.44922, 0.0259426)

[node name="Board3" parent="house/Window Boards4" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.988391, -6.64123e-09, 0.121547, -0.151661, 0.0598987, 0.789293, -0.00910063, -0.998204, 0.0473627, -0.269257, 0.830669, 0.0259426)

[node name="Board4" parent="house/Window Boards4" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.999999, 3.96683e-11, -0.000580847, 0.000907585, -4.37114e-08, 0.64, -1.3144e-15, -1, -2.79753e-08, -0.269257, 2.37519, 0.0259426)

[node name="Board5" parent="house/Window Boards4" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.634496, -0.0583656, 0.49326, -0.772035, -2.77821e-08, 0.406771, -0.0370959, -0.998295, -0.0288386, -0.368805, 1.5098, -0.0721991)

[node name="Window Boards5" type="Node3D" parent="house"]
transform = Transform3D(0.997255, 0, -0.0740389, 0, 1, 0, 0.0740389, 0, 0.997255, 2.74969, 0.474396, -3.4704)

[node name="Board2" parent="house/Window Boards5" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.99226, 5.42777e-09, -0.0794707, 0.124173, -4.33731e-08, 0.635047, -1.3144e-15, -1, -2.79753e-08, -0.269257, 1.96619, 0.0259426)
removable = true
collider = true

[node name="Board" parent="house/Window Boards5" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.99985, -7.57529e-10, 0.0138642, -0.0173303, -4.37048e-08, 0.79988, 5.79516e-16, -1, -3.49691e-08, -0.269257, 1.44922, 0.0259426)
removable = true
collider = true

[node name="Board3" parent="house/Window Boards5" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.988391, -6.64123e-09, 0.121547, -0.151661, 0.0598987, 0.789293, -0.00910063, -0.998204, 0.0473627, -0.269257, 0.830669, 0.0259426)
removable = true
collider = true

[node name="Board4" parent="house/Window Boards5" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.999999, 3.96683e-11, -0.000580847, 0.000907585, -4.37114e-08, 0.64, -1.3144e-15, -1, -2.79753e-08, -0.269257, 2.37519, 0.0259426)
removable = true
collider = true

[node name="Board5" parent="house/Window Boards5" instance=ExtResource("2_r0bn5")]
transform = Transform3D(0.634496, -0.0583656, 0.49326, -0.772035, -2.77821e-08, 0.406771, -0.0370959, -0.998295, -0.0288386, -0.368805, 1.5098, -0.0721991)
removable = true
collider = true

[node name="Timer" type="Timer" parent="house/Window Boards5"]

[node name="StoryCollider" type="StaticBody3D" parent="house"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.02411, 0, 3.3692)
script = ExtResource("4_n6anw")
description = "You knock on the door, there's no response. Wiggling the handle reveals it to be locked."

[node name="CollisionShape3D" type="CollisionShape3D" parent="house/StoryCollider"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.391541, 2.03157, 0.406305)
shape = SubResource("BoxShape3D_sl7l7")

[node name="Switch" type="Node3D" parent="house"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.43724, 1.62323, 2.49645)

[node name="StoryCollider" type="StaticBody3D" parent="house/Switch" node_paths=PackedStringArray("signals", "Marker")]
script = ExtResource("4_n6anw")
description = "A small light switch labelled \"Porch Light.\"
You flick it."
signals = [NodePath("../../../PorchLight"), NodePath("SwitchBAse/SwitchLever")]
Indicate = true
Marker = NodePath("Decal")

[node name="CollisionShape3D" type="CollisionShape3D" parent="house/Switch/StoryCollider"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.57873, 0.0817878, -5.90085)
shape = SubResource("BoxShape3D_i113y")

[node name="SwitchBAse" type="MeshInstance3D" parent="house/Switch/StoryCollider"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.56816, 0.0733433, -5.81953)
mesh = SubResource("BoxMesh_aehgj")

[node name="SwitchLever" type="MeshInstance3D" parent="house/Switch/StoryCollider/SwitchBAse"]
transform = Transform3D(-0.766044, 0.642787, 0, -0.642787, -0.766044, 0, 0, 0, 1, 0.0735722, 0, 0)
mesh = SubResource("BoxMesh_ixtmd")
script = ExtResource("5_2lskt")

[node name="AnimationPlayer" type="AnimationPlayer" parent="house/Switch/StoryCollider/SwitchBAse"]
libraries = {
"": SubResource("AnimationLibrary_ww8cj")
}

[node name="Decal" type="Decal" parent="house/Switch/StoryCollider"]
transform = Transform3D(-0.97446, 0.0157388, -0.224008, 0.22456, 0.0682973, -0.972064, 0, -0.997541, -0.0700873, -9.47029, 0.546968, -5.45782)
visible = false
size = Vector3(0.478027, 1.71234, 0.412964)
texture_emission = ExtResource("6_uoo2s")
script = ExtResource("6_0ynxs")

[node name="Ground" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.550546, 0)

[node name="HouseGround" type="MeshInstance3D" parent="Ground"]
layers = 8193
material_override = ExtResource("2_e20xh")
mesh = SubResource("BoxMesh_43kqw")
skeleton = NodePath("../../house/OmniLight3D")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground"]
shape = SubResource("BoxShape3D_u2pcf")

[node name="mailbox2" parent="." instance=ExtResource("9_bbtn0")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 4.70885, -0.050546, 5.79003)

[node name="StoryCollider" type="StaticBody3D" parent="mailbox2" node_paths=PackedStringArray("Marker")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 4.70885, 0.050546, 5.79003)
collision_layer = 2
collision_mask = 2
script = ExtResource("4_n6anw")
description = "A small white mailbox, there seems to be something inside it."
SecondaryMessages = Array[String](["A leaflet!", "\"Welcome to ZORK
Zork is a game of adventure, danger, and low cunning. In it you will explore some of the most amazing territory ever seen by mortals. No computer should be without one!\"

The leaflet is dated almost 40 years ago..."])
Indicate = true
Marker = NodePath("../../Timer/Marker")

[node name="CollisionShape3D" type="CollisionShape3D" parent="mailbox2/StoryCollider"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.74435, 1.45435, 6.00937)
shape = SubResource("BoxShape3D_t1jw3")

[node name="StaticBody3D" type="StaticBody3D" parent="mailbox2"]
transform = Transform3D(1, 0, 1.74846e-07, 0, 1, 0, -1.74846e-07, 0, 1, -0.0501118, -1.11759e-08, -0.0220566)

[node name="CollisionShape3D" type="CollisionShape3D" parent="mailbox2/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0235291, 0.775201, -0.0350723)
shape = SubResource("BoxShape3D_qlf3f")

[node name="Timer" type="Timer" parent="."]
autostart = true

[node name="Marker" type="MeshInstance3D" parent="Timer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.75814, 1.88977, 5.79486)
cast_shadow = 0
mesh = SubResource("TorusMesh_urnji")
skeleton = NodePath("../..")
script = ExtResource("6_0ynxs")

[connection signal="timeout" from="Timer" to="house/Switch/StoryCollider" method="_on_timer_timeout"]
[connection signal="timeout" from="Timer" to="mailbox2/StoryCollider" method="_on_timer_timeout"]
